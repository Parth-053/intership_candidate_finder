<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post Internship - Recruiter Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8fafc;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 260px;
            background: linear-gradient(180deg, #0f766e 0%, #134e4a 100%);
            padding: 2rem 0;
            transition: transform 0.3s ease;
            z-index: 1000;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }

        .sidebar.hidden {
            transform: translateX(-100%);
        }

        .sidebar-header {
            padding: 0 1.5rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .company-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            color: #fff;
            margin-top: 0.5rem;
            display: inline-block;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            color: #d1fae5;
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 3px solid transparent;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border-left-color: #10b981;
        }

        .nav-item.active {
            background: rgba(16, 185, 129, 0.2);
            color: #fff;
            border-left-color: #10b981;
        }

        .nav-icon {
            width: 20px;
            height: 20px;
        }

        .main-content {
            margin-left: 260px;
            padding: 2rem;
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }

        .mobile-header {
            display: none;
            background: #fff;
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: sticky;
            top: 0;
            z-index: 999;
            margin: -2rem -2rem 2rem;
        }

        .menu-btn {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        .page-header {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: #fff;
            padding: 2.5rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(15, 118, 110, 0.3);
        }

        .page-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .form-container {
            max-width: 900px;
            margin: 0 auto;
            background: #fff;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid #f1f5f9;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #475569;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .required {
            color: #ef4444;
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8fafc;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #14b8a6;
            background: #fff;
            box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
            font-family: inherit;
        }

        .form-hint {
            font-size: 0.875rem;
            color: #64748b;
            margin-top: 0.5rem;
        }

        .skills-input-wrapper {
            position: relative;
        }

        .skills-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .skill-tag {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .remove-skill {
            cursor: pointer;
            font-weight: 700;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .remove-skill:hover {
            opacity: 1;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .error-message {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        .form-input.error,
        .form-select.error,
        .form-textarea.error {
            border-color: #ef4444;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 2px solid #f1f5f9;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #0f766e 0%, #14b8a6 100%);
            color: #fff;
            flex: 1;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(15, 118, 110, 0.4);
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .success-message {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: #10b981;
            color: #fff;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
            display: none;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }

        .success-message.show {
            display: flex;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.visible {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .mobile-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            .page-title {
                font-size: 1.5rem;
            }

            .form-container {
                padding: 1.5rem;
            }

            .button-group {
                flex-direction: column;
            }

            .success-message {
                top: 1rem;
                right: 1rem;
                left: 1rem;
            }
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .overlay.visible {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="recruiter-dashboard.html" class="logo">
                <span>üè¢</span>
                <span>CareerHub</span>
            </a>
            <span class="company-badge">Recruiter</span>
        </div>
        <nav style="margin-top: 2rem;">
            <a href="recruiter-dashboard.html" class="nav-item">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                </svg>
                <span>Dashboard</span>
            </a>
            <a href="post-internship.html" class="nav-item active">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
                <span>Post Internship</span>
            </a>
            
            <a href="applicant.html" class="nav-item">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                </svg>
                <span>Applicants</span>
            </a>
            <a href="message.html" class="nav-item">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                </svg>
                <span>Messages</span>
            </a>
        </nav>
    </div>

    <!-- Overlay for mobile -->
    <div class="overlay" id="overlay"></div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage">
        <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
        </svg>
        <span>Internship posted successfully!</span>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Mobile Header -->
        <div class="mobile-header">
            <button class="menu-btn" id="menuBtn">
                <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
            <div style="font-weight: 700; color: #1e293b;">Post Internship</div>
            <div style="width: 24px;"></div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">Post New Internship üìù</h1>
            <p class="page-subtitle">Fill in the details to create a new internship opportunity</p>
        </div>

        <!-- Form Container -->
        <div class="form-container">
            <form id="internshipForm">
                <!-- Basic Information -->
                <div class="form-section">
                    <h2 class="section-title">Basic Information</h2>
                    
                    <div class="form-group">
                        <label class="form-label">
                            Internship Title <span class="required">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="title" 
                            class="form-input" 
                            placeholder="e.g., Full Stack Developer Intern"
                            required
                        >
                        <p class="error-message" id="titleError">Please enter an internship title</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Description <span class="required">*</span>
                        </label>
                        <textarea 
                            id="description" 
                            class="form-textarea" 
                            placeholder="Describe the internship role, responsibilities, and what the candidate will learn..."
                            required
                        ></textarea>
                        <p class="form-hint">Provide a detailed description to attract the right candidates</p>
                        <p class="error-message" id="descriptionError">Please enter a description</p>
                    </div>
                </div>

                <!-- Skills & Requirements -->
                <div class="form-section">
                    <h2 class="section-title">Skills & Requirements</h2>
                    
                    <div class="form-group">
                        <label class="form-label">
                            Required Skills <span class="required">*</span>
                        </label>
                        <div class="skills-input-wrapper">
                            <div class="skills-tags" id="skillsTags"></div>
                            <input 
                                type="text" 
                                id="skillsInput" 
                                class="form-input" 
                                placeholder="Type a skill and press Enter (e.g., JavaScript, React, Python)"
                            >
                        </div>
                        <p class="form-hint">Press Enter after typing each skill to add it</p>
                        <p class="error-message" id="skillsError">Please add at least one skill</p>
                    </div>
                </div>

                <!-- Internship Details -->
                <div class="form-section">
                    <h2 class="section-title">Internship Details</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                Duration <span class="required">*</span>
                            </label>
                            <select id="duration" class="form-select" required>
                                <option value="">Select Duration</option>
                                <option value="2">2 months</option>
                                <option value="3">3 months</option>
                                <option value="4">4 months</option>
                                <option value="6">6 months</option>
                                <option value="12">12 months</option>
                            </select>
                            <p class="error-message" id="durationError">Please select a duration</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Location <span class="required">*</span>
                            </label>
                            <select id="location" class="form-select" required>
                                <option value="">Select Location</option>
                                <option value="Remote">Remote</option>
                                <option value="Bangalore">Bangalore</option>
                                <option value="Mumbai">Mumbai</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Hyderabad">Hyderabad</option>
                                <option value="Pune">Pune</option>
                                <option value="Hybrid">Hybrid</option>
                            </select>
                            <p class="error-message" id="locationError">Please select a location</p>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">
                                Monthly Stipend (‚Çπ) <span class="required">*</span>
                            </label>
                            <input 
                                type="number" 
                                id="stipend" 
                                class="form-input" 
                                placeholder="e.g., 25000"
                                min="0"
                                step="1000"
                                required
                            >
                            <p class="error-message" id="stipendError">Please enter a valid stipend amount</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Number of Openings <span class="required">*</span>
                            </label>
                            <input 
                                type="number" 
                                id="openings" 
                                class="form-input" 
                                placeholder="e.g., 5"
                                min="1"
                                value="1"
                                required
                            >
                            <p class="error-message" id="openingsError">Please enter number of openings</p>
                        </div>
                    </div>
                </div>

                <!-- Additional Information -->
                <div class="form-section">
                    <h2 class="section-title">Additional Information</h2>
                    
                    <div class="form-group">
                        <label class="form-label">
                            Application Deadline
                        </label>
                        <input 
                            type="date" 
                            id="deadline" 
                            class="form-input"
                        >
                        <p class="form-hint">Optional: Set a deadline for applications</p>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            Additional Requirements
                        </label>
                        <textarea 
                            id="additionalRequirements" 
                            class="form-textarea" 
                            placeholder="Any other requirements or benefits (optional)..."
                            style="min-height: 80px;"
                        ></textarea>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary" id="submitBtn">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                        Post Internship
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // ============================================
        // STATE MANAGEMENT
        // ============================================
        let skills = [];

        // ============================================
        // DOM ELEMENTS
        // ============================================
        const form = document.getElementById('internshipForm');
        const skillsInput = document.getElementById('skillsInput');
        const skillsTags = document.getElementById('skillsTags');
        const submitBtn = document.getElementById('submitBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const successMessage = document.getElementById('successMessage');

        // Form fields
        const titleInput = document.getElementById('title');
        const descriptionInput = document.getElementById('description');
        const durationSelect = document.getElementById('duration');
        const locationSelect = document.getElementById('location');
        const stipendInput = document.getElementById('stipend');
        const openingsInput = document.getElementById('openings');
        const deadlineInput = document.getElementById('deadline');
        const additionalRequirements = document.getElementById('additionalRequirements');

        // ============================================
        // SKILLS MANAGEMENT
        // ============================================
        function addSkill(skill) {
            skill = skill.trim();
            if (skill && !skills.includes(skill)) {
                skills.push(skill);
                renderSkills();
                skillsInput.value = '';
                
                // Clear error if exists
                document.getElementById('skillsError').classList.remove('show');
                skillsInput.classList.remove('error');
            }
        }

        function removeSkill(index) {
            skills.splice(index, 1);
            renderSkills();
        }

        function renderSkills() {
            skillsTags.innerHTML = skills.map((skill, index) => `
                <span class="skill-tag">
                    ${skill}
                    <span class="remove-skill" onclick="removeSkill(${index})">√ó</span>
                </span>
            `).join('');
        }

        // Add skill on Enter key
        skillsInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                addSkill(skillsInput.value);
            }
        });

        // ============================================
        // FORM VALIDATION
        // ============================================
        function validateField(field, errorId, condition, errorMessage) {
            const errorElement = document.getElementById(errorId);
            
            if (!condition) {
                field.classList.add('error');
                errorElement.textContent = errorMessage;
                errorElement.classList.add('show');
                return false;
            } else {
                field.classList.remove('error');
                errorElement.classList.remove('show');
                return true;
            }
        }

        function validateForm() {
            let isValid = true;

            // Validate title
            isValid = validateField(
                titleInput, 
                'titleError', 
                titleInput.value.trim().length > 0,
                'Please enter an internship title'
            ) && isValid;

            // Validate description
            isValid = validateField(
                descriptionInput, 
                'descriptionError', 
                descriptionInput.value.trim().length > 20,
                'Description should be at least 20 characters'
            ) && isValid;

            // Validate skills
            isValid = validateField(
                skillsInput, 
                'skillsError', 
                skills.length > 0,
                'Please add at least one skill'
            ) && isValid;

            // Validate duration
            isValid = validateField(
                durationSelect, 
                'durationError', 
                durationSelect.value !== '',
                'Please select a duration'
            ) && isValid;

            // Validate location
            isValid = validateField(
                locationSelect, 
                'locationError', 
                locationSelect.value !== '',
                'Please select a location'
            ) && isValid;

            // Validate stipend
            isValid = validateField(
                stipendInput, 
                'stipendError', 
                stipendInput.value > 0,
                'Please enter a valid stipend amount'
            ) && isValid;

            // Validate openings
            isValid = validateField(
                openingsInput, 
                'openingsError', 
                openingsInput.value > 0,
                'Please enter number of openings'
            ) && isValid;

            return isValid;
        }

        // ============================================
        // FORM SUBMISSION
        // ============================================
        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (!validateForm()) {
                return;
            }

            // Gather form data
            const formData = {
                title: titleInput.value.trim(),
                description: descriptionInput.value.trim(),
                skills: skills,
                duration: parseInt(durationSelect.value),
                location: locationSelect.value,
                stipend: parseInt(stipendInput.value),
                openings: parseInt(openingsInput.value),
                deadline: deadlineInput.value || null,
                additionalRequirements: additionalRequirements.value.trim() || null,
                status: 'open',
                datePosted: new Date().toISOString().split('T')[0]
            };

            // Disable submit button
            submitBtn.disabled = true;
            submitBtn.innerHTML = `
                <svg class="animate-spin" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
                Posting...
            `;

            try {
                // ============================================
                // TODO: BACKEND API INTEGRATION
                // ============================================
                /*
                const response = await fetch('/api/recruiter/internships', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + localStorage.getItem('token')
                    },
                    body: JSON.stringify(formData)
                });

                if (!response.ok) {
                    throw new Error('Failed to post internship');
                }

                const data = await response.json();
                console.log('Internship posted:', data);
                */

                // Simulate API call delay
                await new Promise(resolve => setTimeout(resolve, 1500));

                // Show success message
                successMessage.classList.add('show');
                
                // Hide success message after 3 seconds
                setTimeout(() => {
                    successMessage.classList.remove('show');
                }, 3000);

                // Reset form
                form.reset();
                skills = [];
                renderSkills();

                // Redirect to dashboard after 2 seconds
                setTimeout(() => {
                    window.location.href = 'recruiter-dashboard.html';
                }, 2000);

            } catch (error) {
                console.error('Error posting internship:', error);
                alert('Failed to post internship. Please try again.');
            } finally {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = `
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    Post Internship
                `;
            }
        });

        // ============================================
        // CANCEL BUTTON
        // ============================================
        cancelBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to cancel? All unsaved changes will be lost.')) {
                window.location.href = 'recruiter-dashboard.html';
            }
        });

        // ============================================
        // REAL-TIME VALIDATION
        // ============================================
        // Remove error on input change
        [titleInput, descriptionInput, durationSelect, locationSelect, stipendInput, openingsInput].forEach(field => {
            field.addEventListener('input', () => {
                field.classList.remove('error');
                const errorId = field.id + 'Error';
                document.getElementById(errorId)?.classList.remove('show');
            });
        });

        // ============================================
        // MOBILE MENU TOGGLE
        // ============================================
        const menuBtn = document.getElementById('menuBtn');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        menuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('visible');
            overlay.classList.toggle('visible');
        });

        overlay.addEventListener('click', () => {
            sidebar.classList.remove('visible');
            overlay.classList.remove('visible');
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('visible');
                overlay.classList.remove('visible');
            }
        });

        // Set minimum date for deadline (today)
        const today = new Date().toISOString().split('T')[0];
        deadlineInput.setAttribute('min', today);

        // ============================================
        // BACKEND INTEGRATION NOTES
        // ============================================
        /*
        BACKEND API INTEGRATION GUIDE:

        1. POST New Internship:
           Endpoint: POST /api/recruiter/internships
           Headers: {
               'Content-Type': 'application/json',
               'Authorization': 'Bearer YOUR_JWT_TOKEN'
           }
           Body: {
               title: string,
               description: string,
               skills: string[],
               duration: number (in months),
               location: string,
               stipend: number,
               openings: number,
               deadline: string (ISO date) | null,
               additionalRequirements: string | null,
               status: 'open',
               datePosted: string (ISO date)
           }
           Response: {
               id: number,
               ...posted internship data,
               message: "Internship posted successfully"
           }

        2. Draft Internship (Save as Draft):
           Endpoint: POST /api/recruiter/internships/draft
           - Same structure as above, but status: 'draft'
           - Allows recruiter to save and continue later

        3. Image Upload (Optional):
           If you want to add company logo or internship images:
           Endpoint: POST /api/recruiter/internships/upload
           Content-Type: multipart/form-data
           - Upload images first, get URLs
           - Include URLs in the main POST request

        4. Validation on Backend:
           - Verify all required fields are present
           - Check if recruiter is authenticated
           - Validate stipend is a positive number
           - Validate duration is within acceptable range
           - Sanitize inputs to prevent XSS attacks
           - Check skills array is not empty

        5. Error Handling:
           Common errors to handle:
           - 401: Unauthorized (redirect to login)
           - 400: Validation error (show specific field errors)
           - 500: Server error (show generic error message)

        Example Implementation:

        async function postInternship(formData) {
            try {
                const response = await fetch('/api/recruiter/internships', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('authToken')}`
                    },
                    body: JSON.stringify(formData)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    
                    if (response.status === 400) {
                        // Handle validation errors
                        displayFieldErrors(errorData.errors);
                        return;
                    }
                    
                    if (response.status === 401) {
                        // Redirect to login
                        window.location.href = '/login';
                        return;
                    }
                    
                    throw new Error(errorData.message || 'Failed to post internship');
                }

                const data = await response.json();
                return data;
                
            } catch (error) {
                console.error('Error:', error);
                throw error;
            }
        }

        function displayFieldErrors(errors) {
            // errors format: { field: 'title', message: 'Title is required' }
            errors.forEach(error => {
                const field = document.getElementById(error.field);
                const errorEl = document.getElementById(error.field + 'Error');
                
                if (field && errorEl) {
                    field.classList.add('error');
                    errorEl.textContent = error.message;
                    errorEl.classList.add('show');
                }
            });
        }

        6. Success Actions:
           After successful post:
           - Show success message
           - Clear form
           - Redirect to dashboard or internship details page
           - Update internships count in navbar
           - Send notification to admin (optional)

        7. Analytics (Optional):
           Track internship posting events:
           - Time taken to fill form
           - Fields that cause most errors
           - Completion rate
           
        8. Auto-save (Advanced):
           Implement auto-save functionality:
           - Save to localStorage every 30 seconds
           - Restore on page reload
           - Clear on successful submission

        Example auto-save:
        
        setInterval(() => {
            const draftData = {
                title: titleInput.value,
                description: descriptionInput.value,
                skills: skills,
                // ... other fields
            };
            localStorage.setItem('internshipDraft', JSON.stringify(draftData));
        }, 30000);

        // On page load, restore draft
        window.addEventListener('load', () => {
            const draft = localStorage.getItem('internshipDraft');
            if (draft && confirm('Would you like to restore your unsaved changes?')) {
                const data = JSON.parse(draft);
                titleInput.value = data.title || '';
                descriptionInput.value = data.description || '';
                skills = data.skills || [];
                renderSkills();
                // ... restore other fields
            }
        });
        */
    </script>
</body>
</html>